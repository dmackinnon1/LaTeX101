<!doctype html>
<!--
This single-page template is used for each learning module.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="LaTeX101 landing page">
    <title>LaTeX101 Learning Module</title>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Additional scripts required for collapse, etc. -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> 

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

	.dm-code {
		background:azure;
	}
    </style>
<!-- for svg
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js", "TeX/AMSmath.js"],
        jax: ["input/TeX", "output/SVG"],
    })
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default"></script>
-->
<script type="text/javascript"	
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  console.log("downloading mathjax")
</script>
</head>
  <body>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="..">dmackinnon1.github.io</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="./">Home <span class="sr-only">(current)</span></a>
        </li>
      
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Modules</a>
          <div class="dropdown-menu" aria-labelledby="dropdown01">
            <a class="dropdown-item" href="./module0.html">0: What is LaTeX?</a>
            <a class="dropdown-item" href="./module1.html">1: Getting Started</a>
            <a class="dropdown-item" href="./module2.html">2: Essential LaTeX Commands</a>
            <a class="dropdown-item" href="./module3.html">3: Cloud-based LaTeX Environments</a>
            <a class="dropdown-item" href="./module4.html">4: LaTeX on Various Platforms</a>
            <a class="dropdown-item" href="./module5.html">5: LaTeX as a Digital Literacy</a>           
          </div>
        </li>
         <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown02" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Utilities</a>
          <div class="dropdown-menu" aria-labelledby="dropdown02">
            <a class="dropdown-item" href="./quiz.html">Command Quiz</a>
            <a class="dropdown-item" href="./simpleLaTeX.html">LaTeX Tester</a>
           </div>
        </li>
      </ul>
    </div>
  </nav>

<main role="main">

  <div id='top_padding'>
  	<br/><br/><br/>
  </div>	
 
  <div class="container">
    
	<hr>
	<div class="row" id="main">
      <div class="col-md-8">
        <h2>A Simple LaTeX Command Renderer</h2> 
    The simple LaTeX renderer below allows you to input LaTeX commands and see
	the resulting displayed math. 
	<br><br>
	<!-- Small LaTeX editor using MathJaX -->    
    <div style="padding:5px;border:thick solid grey;" id='miniEditor'> 
    <div class="input-group">
  			<div class="input-group-prepend">
    		<span class="input-group-text">Input LaTeX:</span>
  			</div>
  			<textarea id='latexInput' class="form-control" aria-label="Input LaTeX"></textarea>
  			<button class="btn btn-secondary" onClick='getRenderedLatex()' role="button">Try It</button>
		</div>
		<br>      
        <div id="renderedLatex" tyle="text-align:center;">  </div>
    </div>
    <!--
    <div class="btn-group btn-group-md" role="group" >	
			<button id="download" class="btn btn-secondary">download</button>	
	</div>
	-->
	<br>
    <!-- end of LaTeX editor -->
    <hr>
    <p> Currently, the easiest way to obtain the rendered LaTeX image is to use a screen-capture
	tool to grab the image.
	</p>
	<hr>
    </div>
    
  </div> <!-- /container -->

</main>

<footer class="container">
  <p><a href='./'>Back to Main</a></p>
</footer>
<script>
//ToDo: Downloader results in incorrect SVG -> look into it
$("#download").on("click", function(event){
		let result = document.getElementById("renderedLatex");
		console.log(result);
		result = result.childNodes[0].childNodes[1].childNodes[0].innerHTML;
		let tempElement = document.createElement('a');
  		tempElement.setAttribute('href', 'data:text/plain;charset=utf-8,' 
  			+ encodeURIComponent(""+ result +""));
  		tempElement.setAttribute('download', 'image.svg');
  		tempElement.style.display = 'none';
  		document.body.appendChild(tempElement);
		tempElement.click();
		document.body.removeChild(tempElement);
	});
//end downloader

function renderAllLatex(){
	//use svg instead of mathml to allow for image downloading
	MathJax.Hub.Typeset();
}
function getRenderedLatex(){
  let equationToRender = document.getElementById("latexInput").value; 
  let html = "<div style='padding:10px;border:thin solid black;'>";
  html += "\\[ \\Large{ " + equationToRender + "} \\]</div>";
  document.getElementById("renderedLatex").innerHTML = html;
  renderAllLatex();
}

//set default
document.getElementById("latexInput").value = "\\LaTeX";
getRenderedLatex();
renderAllLatex();
</script>
</html>
